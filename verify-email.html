<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Verify Email</title>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
</head>
<body>
  <h2>Verifying Email...</h2>
  <div id="message">Please wait.</div>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyB1NtsmihmojQsWzOwqRo-286cv12spgdE",
      authDomain: "utkarshchaudhary-portfolio.firebaseapp.com",
      projectId: "utkarshchaudhary-portfolio",
      storageBucket: "utkarshchaudhary-portfolio.firebasestorage.app",
      messagingSenderId: "487685457505",
      appId: "1:487685457505:web:797c7ac6cc2e40d8c1cc20",
      measurementId: "G-VYF9PRY0F9"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    const urlParams = new URLSearchParams(window.location.search);
    const mode = urlParams.get('mode');
    const oobCode = urlParams.get('oobCode');

    const messageDiv = document.getElementById('message');

    if (mode === 'verifyEmail' && oobCode) {
      auth.applyActionCode(oobCode).then(() => {
        messageDiv.textContent = 'Email verified! Redirecting to login...';
        setTimeout(() => {
          window.location.href = 'login.html';
        }, 3000);
      }).catch(error => {
        messageDiv.textContent = 'Error verifying email: ' + error.message;
      });
    } else {
      messageDiv.textContent = 'Invalid verification link.';
    }
  </script>
</body>
</html>